(function(h){var q="gcFlag",d="gcFields",k="gcSuccess",c="gcStarted",l=null,b={AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua and Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AN:"Netherlands Antilles",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"Åland Islands",AZ:"Azerbaijan",BA:"Bosnia and Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barthélemy",BM:"Bermuda",BN:"Brunei",BO:"Bolivia",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos Islands",CD:"Democratic Republic of the Congo",CF:"Central African Republic",CG:"Congo",CH:"Switzerland",CI:"Côte d'Ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CU:"Cuba",CV:"Cape Verde",CX:"Christmas Island",CY:"Cyprus",CZ:"Czech Republic",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Republic",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands",FM:"Federated States of Micronesia",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom",GD:"Grenada",GE:"Georgia",GF:"French Guiana",GG:"Guernsey",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia and the South Sandwich Islands",GT:"Guatemala",GU:"Guam",GW:"Guinea-Bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard Island and McDonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran",IS:"Iceland",IT:"Italy",JE:"Jersey",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts and Nevis",KP:"North Korea",KR:"South Korea",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Laos",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Moldova",ME:"Montenegro",MF:"Saint Martin",MG:"Madagascar",MH:"Marshall Islands",MK:"Macedonia",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru",NU:"Niue",NZ:"New Zealand",OM:"Oman",PA:"Panama",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"Saint Pierre and Miquelon",PN:"Pitcairn",PR:"Puerto Rico",PS:"Palestinian Territory",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"Réunion",RO:"Romania",RS:"Serbia",RU:"Russian Federation",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SD:"Sudan",SE:"Sweden",SG:"Singapore",SH:"Saint Helena",SI:"Slovenia",SJ:"Svalbard and Jan Mayen",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",ST:"Sao Tome and Principe",SV:"El Salvador",SY:"Syrian Arab Republic",SZ:"Swaziland",TC:"Turks and Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-Leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad and Tobago",TV:"Tuvalu",TW:"Taiwan",TZ:"Tanzania",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VA:"Holy See",VC:"Saint Vincent and the Grenadines",VE:"Venezuela",VG:"British Virgin Islands",VI:"U.S. Virgin Islands",VN:"Vietnam",VU:"Vanuatu",WF:"Wallis and Futuna",WS:"Samoa",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe"},n={US:{AL:"Alabama",AK:"Alaska",AS:"American Samoa",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",DC:"District of Columbia",FM:"Federated States of Micronesia",FL:"Florida",GA:"Georgia",GU:"Guam",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MH:"Marshall Islands",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",MP:"Northern Mariana Islands",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PW:"Palau",PA:"Pennsylvania",PR:"Puerto Rico",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VI:"Virgin Islands",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"}};function p(w,v){this.latitude=0;this.longitude=0;this.accuracy=0;this.country=null;this.region=null;this.city=null;this.postalCode=null;this.street=null;this.address=null;this.placemark=w;if(w.Point&&w.Point.coordinates){this.latitude=w.Point.coordinates[0];this.longitude=w.Point.coordinates[1]}var x=w.AddressDetails;if(x){this.accuracy=x.Accuracy;if(x.Country!=null){x=x.Country;this.country=x.CountryNameCode}if(x.AdministrativeArea!=null){x=x.AdministrativeArea;this.region=x.AdministrativeAreaName}if(x.SubAdministrativeArea!=null){x=x.SubAdministrativeArea}if(x.Locality!=null){x=x.Locality;this.city=x.LocalityName}if(x.PostalCode!=null){this.postalCode=x.PostalCode.PostalCodeNumber}if(x.Thoroughfare!=null){this.street=x.Thoroughfare.ThoroughfareName}this.buildAddress(v)}}p.prototype.buildAddress=function(v){var w=this.address,x,y;if(w==null){if(this.street!=null){w=this.street}if(this.city!=null){w=w==null?this.city:w+", "+this.city}if(this.region!=null){x=this.region;if(w==null||this.street==null){if(v&&v.mapRegion&&n[this.country]&&n[this.country][this.region]){x=n[this.country][this.region]}}w=w==null?x:w+", "+x}if(this.postalCode!=null){w=w==null?this.postalCode:w+", "+this.postalCode}if(this.country!=null){y=this.country;if(v&&v.mapCountry&&b[this.country]){y=b[this.country]}if(w!=null){if(v&&h.inArray(this.country,v.implicitCountries)==-1){w=w+", "+y}}else{w=y}}this.address=w}return w};p.prototype.isValid=function(v){var w=true;if(this.address==null){w=false;console.log(this.placemark)}if(w&&this.country&&v.countries.length>0){w=h.inArray(this.country.toUpperCase(),v.countries)!=-1}return w};p.prototype.compareTo=function(v){if(this.country!=v.country){return this.country<v.country?-1:1}return this.address<v.address?-1:this.address==v.address?0:1};var i=function(x){var v=h(x.form),y=v.data(d),w=y!=null;if(!y){y=new Array();v.data(d,y);v.data(c,0);v.data(k,new Array())}y.push(x);return w};var t=function(y,z,w,v){var x=function(C){if(!h(C.target).hasClass("disambiguation")){h(document).unbind("keypress",x);h(document).unbind("mousedown",x);h(".disambiguation").remove()}};var A=h(document.createElement("div")),B=h(y).position();h.each(z,function(){var C=document.createElement("div");C.mark=this;h(C).text(this.address).addClass("disambiguationLink");A.append(C)});A.addClass("disambiguation");A.css({left:B.left,top:B.top+h(y).outerHeight(),width:h(y).width()});h(y).after(A);h(".disambiguationLink").live("click",function(){h(y).val(h(this).text());if(v.choiceCallback){v.choiceCallback(this.mark)}A.remove();if(w){w.submit()}});h(document).bind("keypress",x).bind("click",x);A.show()};var u=function(w,v){h(w).data(c,v).data(k,new Array())};var o=function(x,v,w){var y=h.trim(h(x).val());if(y.length>1){if(v.baseCountryCode!=null){l.setBaseCountryCode(v.baseCountryCode)}l.getLocations(y,f(x,v,w))}else{if(w){a(w,1);w.submit()}}};var e=function(w,v){if(h(w).is("form")){u(w,1);h.each(h(w).data(d),function(){o(this,v,w)})}else{o(w,v)}};var f=function(x,v,w){return function(y){return s(x,v,w,y)}};var m=function(w,v){var x=new Array(),y=new Array();h.each(w,function(){if(this&&this.AddressDetails){var z=new p(this,v);if(z.isValid(v)){if(h.inArray(z.address,y)==-1){x.push(z);y.push(z.address)}}}});x.sort(function(A,z){return A.compareTo(z)});return x};var s=function(y,v,x,w){var A=!w?-1:w.Status.code;if(A==500||A==603||A==620){if(x){a(x,1)}}else{if(A==-1||A!=200){if(x){a(x,v.submitOnFailure?1:0)}}else{var z=m(w.Placemark,v);if(z.length<1){if(x){a(x,v.submitOnFailure?1:0)}}else{if(z.length==1){if(x){a(x,1)}h(y).val(z[0].address);if(v.choiceCallback){v.choiceCallback(z[0])}}else{if(x){a(x,0)}v.disambiguationCallback(y,z,x,v)}}}}if(x){x.submit()}};var a=function(v,w){v.data(k).push(w)};var g=function(v){return(h(v).data(k).length==h(v).data(d).length)};var r=function(v){var w=h(v).data(k),x=0;h.each(w,function(){x=x+this});return x==w.length};var j=function(v){return h(v).data(c)==1};h.fn.geocodable=function(w){var v=jQuery.extend({disambiguationCallback:t,choiceCallback:null,onSubmit:true,onBlur:true,submitOnFailure:true,countries:["US","PR","GU","VI","MP"],implicitCountries:["US"],baseCountryCode:null,mapCountry:true,mapRegion:true},w);if(l==null&&typeof(GBrowserIsCompatible)!="undefined"&&GBrowserIsCompatible()){l=new GClientGeocoder()}return this.each(function(){var y=h(this),x=h(this.form);if(l==null||!y.is(":text")){return}if(!y.data(q)){y.data(q,1);if(v.onBlur){y.blur(function(){e(this,v)})}if(v.onSubmit){if(!i(this)){x.submit(function(){if(j(this)){if(!g(this)){return false}if(r(this)){this.submit();return true}else{u(this,0);return false}}e(this,v);return false})}}}})}})(jQuery);